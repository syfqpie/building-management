<div class="container-fluid">
    <div class="row g-3 mb-3">
        <div class="col-sm-12 col-lg-12">
            <div class="card shadow">
                <div class="card-body">
                    <h5 class="card-title mb-0">
                        Unit Management
                    </h5>
                </div>
                <p-table #unitsTable
                    [value]="units"
                    [rows]="5"
                    [paginator]="true"
                    [loading]="isLoadingData && units.length === 0"
                    [resizableColumns]="true"
                    styleClass="rounded-bottom">
                    <ng-template pTemplate="header">
                        <tr>
                            <th pSortableColumn="unitNo"
                                style="width: 30% !important">
                                Unit
                                <p-sortIcon field="unitNo"></p-sortIcon>
                            </th>
                            <th pSortableColumn="squareFeet">
                                Square Feet
                                <p-sortIcon field="squareFeet"></p-sortIcon>
                            </th>
                            <th pSortableColumn="block">
                                Block
                                <p-sortIcon field="block"></p-sortIcon>
                            </th>
                            <th pSortableColumn="floor">
                                Floor
                                <p-sortIcon field="floor"></p-sortIcon>
                            </th>
                            <th pSortableColumn="isActive">
                                Active
                                <p-sortIcon field="isActive"></p-sortIcon>
                            </th>
                            <!-- <th pSortableColumn="user.dateJoined">
                                Joined date
                                <p-sortIcon field="user.dateJoined"></p-sortIcon>
                                <p-columnFilter type="date"
                                    field="user.dateJoined"
                                    display="menu"
                                    class="ms-auto">
                                </p-columnFilter>
                            </th>
                            <th>
                                Source
                                <p-columnFilter field="user.candidateUser.utm.0.utmSource"
                                    matchMode="equals"
                                    [showMatchModes]="false"
                                    [showOperator]="false"
                                    [showAddButton]="false"
                                    display="menu"
                                    class="ms-auto">
                                    <ng-template pTemplate="filter"
                                        let-value
                                        let-filter="filterCallback">
                                        <p-dropdown
                                            [ngModel]="value"
                                            [options]="utmSources"
                                            (onChange)="filter($event.value)"
                                            placeholder="Any">
                                            <ng-template let-option pTemplate="item">
                                                <span> {{ option }} </span>
                                            </ng-template>
                                        </p-dropdown>
                                    </ng-template>
                                </p-columnFilter>
                            </th>
                            <th pSortableColumn="verified">
                                Verified
                                <p-sortIcon field="verified"></p-sortIcon>
                                <p-columnFilter type="boolean"
                                    field="verified"
                                    display="menu"
                                    class="ms-auto">
                                </p-columnFilter>
                            </th>
                            <th>
                                Action
                            </th> -->
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-unit>
                        <tr [pSelectableRow]="unit">
                            <td>{{ unit.unitNo }}</td>
                            <td>{{ unit.squareFeet }}</td>
                            <td>{{ unit.block }}</td>
                            <td>{{ unit.floor }}</td>
                            <td>{{ unit.isActive }}</td>
                            <!-- <td>{{ candidate.user.dateJoined | date: 'dd/MM/yyyy' }}</td>
                            <td>
                                <span *ngIf="candidate.user.candidateUser.utm.length !== 0; else noSource">
                                    {{ candidate.user.candidateUser.utm[0].utmSource }}
                                </span>
                                <ng-template #noSource>
                                    -
                                </ng-template>
                            </td>
                            <td>
                                <span class="rounded-0"
                                    [ngClass]="candidate.verified ? 'badge-emerald' : 'badge-amber'">
                                    {{ candidate.verified | verifiedPipe }}
                                </span>
                            </td>
                            <td>
                                <button class="btn btn-primary btn-sm rounded-0"
                                    (click)="resendVerificationEmail(candidate.email)"
                                    [disabled]="candidate.verified">
                                    <i class="far fa-paper-plane me-2"></i>
                                    Resend verification email
                                </button>
                            </td> -->
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="loadingbody" let-columns="columns">
                        <tr *ngFor="let loadingRow of [0, 1, 2, 3, 4]">
                            <td *ngFor="let loadingRow of [0, 1, 2, 3, 4]">
                                <div style="flex: 1">
                                    <p-skeleton width="100%"
                                        styleClass="my-1"
                                        borderRadius="0">
                                    </p-skeleton>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </div>
</div>